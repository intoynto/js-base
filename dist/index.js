!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("intoy-modal"),require("intoy-utils"),require("intoy-xhr"),require("intoy-select")):"function"==typeof define&&define.amd?define(["exports","react","intoy-modal","intoy-utils","intoy-xhr","intoy-select"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["intoy-base"]={},t.React,t["intoy-modal"],t["intoy-utils"],t["intoy-xhr"],t["intoy-select"])}(this,(function(t,e,r,n,s,a){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o,l=i(e);function d(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var h="qparams",p="New",f="Edit",g={records:"records",page:"page",pagecount:"pagecount",limit:"limit",rowcount:"rowcount",totalrow:"totalrow"};function m(){return g}function b(){return h}function v(){return p}function y(){return f}function S(){var t;return o&&"string"==typeof o&&(t={Authorization:"Bearer "+o}),t}function w(t,e){var n=t.code;t.xhr&&t.xhr.status!==t.code&&409!==t.code&&(n=t.xhr.status);var s=[400,409,422].indexOf(n)>=0,a=t.title,i=t.message;(s||403===n)&&(a=n+" Bad Request",409===n&&(a="Conflict"),422===n&&(a=n+" Unprocessable"),403===n&&(a="Access Denied "+n)),null!=e&&(void 0!==e.msg_before&&(e.msg_before||"").toString().trim().length>0&&(i=e.msg_before.toString().trim()+". "+i),void 0!==e.msg_after&&(e.msg_after||"").toString().trim().length>0&&(i+=". "+e.msg_after)),(s?r.AlertWarn:r.AlertError)(a,i,"OK")}var C=function(t){function e(e){var r;return(r=t.call(this,e)||this).updOnDidUpRecord=!1,r.clrDataOnFailed=!1,r._mod=!1,r.delReqTipe=b(),r.onSetLimit=function(t){null!=t&&t!==r.req.limit&&(r.req.limit=t,r.onReload())},r.lodOv=null,r.onSearch=r.onSearch.bind(u(r)),r.doReload=r.doReload.bind(u(r)),r.onReload=r.onReload.bind(u(r)),r.onInsert=r.onInsert.bind(u(r)),r.onUpdate=r.onUpdate.bind(u(r)),r.onDelete=r.onDelete.bind(u(r)),r.onAftInsert=r.onAftInsert.bind(u(r)),r.onAftUpdate=r.onAftUpdate.bind(u(r)),r.onAftDelete=r.onAftDelete.bind(u(r)),r.doSndDelete=r.doSndDelete.bind(u(r)),r.onSetPage=r.onSetPage.bind(u(r)),r.didUpRecord=r.didUpRecord.bind(u(r)),r.onItemBeforeUpdate=r.onItemBeforeUpdate.bind(u(r)),r.onItemUpdated=r.onItemUpdated.bind(u(r)),r.didUpList=r.didUpList.bind(u(r)),r.handResp=r.handResp.bind(u(r)),r.handSort=r.handSort.bind(u(r)),r.handRespAft=r.handRespAft.bind(u(r)),r.rdrChilds=r.rdrChilds.bind(u(r)),r.rdrFind=r.rdrFind.bind(u(r)),r.rdrTable=r.rdrTable.bind(u(r)),r.rdrPag=r.rdrPag.bind(u(r)),r.search={search:"number"==typeof e.search||"string"==typeof e.search?e.search.toString():""},r.asgFieldShow=2,r.records=[],r.req={page:1,limit:e.limit?e.limit:20,search:{}},r.res={limit:r.req.limit,page:1,pagecount:1,rowcount:0,totalrow:0,records:[]},r.state=r.gInitState(e),r}d(e,t);var a=e.prototype;return a.gInitState=function(t){return{loadedCount:0,loading:!1,error:null}},a.ovOpen=function(t){this.lodOv?t&&t.text&&this.lodOv.setText(t.text):(this.lodOv=new r.LoadingOverlay(Object.assign({clickClose:!1},t)),this.lodOv.open())},a.ovClose=function(){this.lodOv&&(this.lodOv.destroy(),this.lodOv=null)},a.getIndexArrayObj=function(t){var e=t||{},r=-1,s=n.toStr(e.field).toString().trim();if(!Array.isArray(e.arrayObj)||s.length<1)return r;var a=n.toStr(e.value).toString().trim();e.sensitive||(a=a.toUpperCase());for(var i=0;i<e.arrayObj.length;i++){var o=e.arrayObj[i];if("object"==typeof o&&!Array.isArray(o)){var l=n.toStr(o[e.field]).toString().trim();if(e.sensitive||(l=l.toUpperCase().trim()),a===l){r=i;break}}}return r},a.didUpRecord=function(t,e,r){t>=0&&r&&Array.isArray(this.records)&&this.records.length>0&&t<=this.records.length-1&&(this.records[t]=Object.assign({},r),this.onItemUpdated(),this.updOnDidUpRecord&&this.forceUpdate())},a.onItemBeforeUpdate=function(t){},a.onItemUpdated=function(){},a.didUpList=function(){},a.handResp=function(t){var e=m();t&&t[e.records]&&Array.isArray(t[e.records])?(this.res=Object.assign({},t),this.res.records=t[e.records].slice(0),this.res.page=void 0!==t[e.page]&&null!==t[e.page]?t[e.page]:1,this.res.pagecount=void 0!==t[e.pagecount]&&null!==t[e.pagecount]?t[e.pagecount]:1,this.res.totalrow=void 0!==t[e.totalrow]&&null!==t[e.totalrow]?t[e.totalrow]:this.res.records.length,this.res.rowcount=void 0!==t[e.rowcount]&&null!==t[e.rowcount]?t[e.rowcount]:this.res.records.length,this.res.limit=void 0!==t[e.limit]&&null!==t[e.limit]?t[e.limit]:this.req.limit,this.res.page=this.res.page<1?1:this.res.page,this.res.pagecount=this.res.pagecount<1?1:this.res.pagecount,this.res.totalrow=this.res.totalrow<0?0:this.res.totalrow,this.res.rowcount=this.res.rowcount<0?0:this.res.rowcount,this.res.rowcount=this.res.rowcount>this.res.totalrow?this.res.totalrow:this.res.rowcount,this.records=this.res.records.slice(0),this.res.records=[]):Array.isArray(t)?(this.records=t.slice(0),this.res.page=1,this.res.pagecount=1,this.res.rowcount=this.records.length,this.res.totalrow=n.toInt(this.res.totalrow),this.res.totalrow=this.res.totalrow<this.res.rowcount?this.res.rowcount:this.res.totalrow):(this.records=[],this.res.page=1,this.res.pagecount=1,this.res.totalrow=0,this.res.rowcount=0)},a.handSort=function(){if(Array.isArray(this.records)&&this.records.length>0&&this.props.table&&void 0!==this.props.table.sortField&&null!==this.props.table.sortField){var t=this.props.table.sortField||"index",e=this.props.table.sortFieldType||"string";this.records.sort((function(r,n){var s=r[t],a=n[t];return["integer","double"].indexOf(e)>=0&&(s=parseFloat(s),a=parseFloat(a)),s>a?1:s<a?-1:0}))}},a.handFilter=function(){},a.handRespAft=function(t){this.setState({loadedCount:this.state.loadedCount+1,loading:!1,error:null})},a.getSetup=function(t){var e={url:this.props.url_data?this.props.url_data.toString().trim():""};t&&(e.params=Object.assign({},t));var r=S();return r&&(e.headers=Object.assign({},r)),e},a.doReload=function(){var t=this,e=Object.assign({},this.req);this.res.pagecount>0&&e.page>this.res.pagecount&&(e.page=this.res.pagecount);var r=this.getSetup(Object.assign(Object.assign({},e),this.search)),n=S();n&&(r.headers=Object.assign({},n)),s.ajax(r).then((function(e){t.handResp(e),t.handSort(),t.handFilter(),t.handRespAft()})).catch((function(e){if(t.clrDataOnFailed)return t.handResp(null),void t.handRespAft(!1);t.handRespAft(!1)}))},a.onReload=function(){this.state.loading&&console.warn("Base multiple calling reload at sometime"),this.setState({loading:!0},this.doReload)},a.onSearch=function(t){n.isEqual(this.search,t)||(this.search=Object.assign({},t),this.req.page=1,this.onReload())},a.onAftInsert=function(t){this.didUpList(),this.onReload()},a.onInsert=function(){var t=this,e=this.props.compForm;e&&!this._mod&&(this._mod=!0,e({onClose:function(){return t._mod=!1}}).then((function(e){t._mod=!1,t.onAftInsert(e)})))},a.onAftUpdate=function(t){this.didUpList(),this.onReload()},a.onUpdate=function(t){var e=this,r=this.props.compForm;r&&!this._mod&&(this._mod=!0,r({data:t,onClose:function(){return e._mod=!1}}).then((function(t){e._mod=!1,e.onAftUpdate(t)})))},a.onAftDelete=function(t,e,r){var n=!0===this.props.reloadOnDeleted,s=-1;if(n||(s=this.getIndexArrayObj({arrayObj:this.records,field:e,value:r})),s>=0&&!n){if(this.records.splice(s,1),this.records.length>0)return this.didUpList(),void this.forceUpdate();n=!0}this.didUpList(),this.onReload()},a.getMsgDel=function(t){if(!t)return"";var e=this.props.table||{},r=e.fieldid,s="",a=[],i="";if(r&&t[r],n.toStr(e.dataName).toString().trim().length>0&&(i=n.toStr(e.dataName).toString().trim()),e.fields&&e.fields.length>0)for(var o=0;o<e.fields.length;o++){var l=e.fields[o],d=n.toStr(t[l.f]);if(d.length>0){d.length>50&&(d=d.substring(0,50)+"..");var c=n.toStr(e.fields[o].alias),u="<b>"+d+"</b>";c.length>0&&(u=c+" "+u),a.push(u)}if(a.length>=this.asgFieldShow)break}return i.length>0&&(s+=n.toUcWords(i)),a.length>0&&(s.length>0?s+=" item":s+="Item",s+=" data "+a.join(", ")),s+=" akan dihapus."},a.getSetupDel=function(t){var e=this,r=this.props,s={url:this.props.url_delete?this.props.url_delete.toString().trim():"",params:t,method:"POST"};return"qparams"===this.delReqTipe?function(){var e=r.table&&r.table.fieldid?r.table.fieldid:null;e="string"==typeof e?(e=n.toStr(e)).length>0?[e]:[]:Array.isArray(e)?e:[];var a=n.rTrim(n.toStr(r.url_delete),"/");a+="?"!==a[a.length-1]?"?":"",s.method="delete",s.params={},t=t||{};for(var i=0;i<e.length;i++){var o=e[i],l=n.toStr(t[o]).toString().trim();l.length>0&&(s.params[o]=l)}var d=new URLSearchParams(s.params);delete s.params,s.url=a+d.toString()}():function(){var r=e.props.table||{},a=r.fieldid?r.fieldid:"";a=Array.isArray(a)?a:[a];for(var i=[],o=0;o<a.length;o++){var l=n.toStr(a[o]),d=l.length>0?n.toStr(t[l]).toString().trim():"";d.length>0&&i.push(d)}i.length>0&&(s.method="DELETE",s.url+="/"+i.join("/"),delete s.params);var c=S();c&&(s.headers=c)}(),s},a.doSndDelete=function(t){var e=this;this.setState({loading:!0},(function(){var r=e.props.table||{},n=r.fieldid?r.fieldid:"";e.ovOpen({text:"Menghapus,.."}),s.ajax(t).then((function(r){e.ovClose(),e.setState({loading:!1},(function(){e.onAftDelete(t.params,n,r)}))})).catch((function(t){e.ovClose(),w(t),e.setState({loading:!1})}))}))},a.onDelete=function(t){var e=this,n=this.getMsgDel(t),s="Terkait data dimaksud ada kemungkinan akan ikut terhapus. <br/>&nbsp;<br/>Apakah Anda setuju?";n+=(n+" "+s).length>100?"<br/>":" ",n+=s;r.AlertExclam("Konfirmasi Hapus",n,'<i class="fa fa-hand-stop-o"> </i> Tidak',(function(){}),'<i class="fa fa-thumbs-o-up"> </i> Iya setuju hapus',(function(){var r=e.getSetupDel(t);e.doSndDelete(r)}))},a.onSetPage=function(t){if(this.state.loading)return!1;(t=(t=(t=n.toInt(t))<1?1:t)>this.res.pagecount?this.res.pagecount:t)!==this.res.page&&(this.req.page=t,this.onReload())},a.getFndProps=function(){return{useInsert:this.props.useInsert,search:Object.assign({},this.search),onSearch:this.onSearch,onReload:this.onReload,onInsert:this.onInsert,onSetLimit:this.onSetLimit,limit:this.req.limit,loading:this.state.loading}},a.getTblProps=function(){return{useUpdate:this.props.useUpdate,useDelete:this.props.useDelete,onUpdate:this.onUpdate,onDelete:this.onDelete,onReload:this.onReload,table:this.props.table,records:this.records,page:this.res.page,limit:this.req.limit,loading:this.state.loading}},a.getPagProps=function(){return{page:this.res.page,pagecount:this.res.pagecount,rowcount:this.res.rowcount,limit:this.res.limit,totalrow:this.res.totalrow,onSetPage:this.onSetPage,dsLeft:!0,dsRight:!0}},a.rdrFind=function(){var t=this.props.compFind;if(t){var e=this.getFndProps();return l.default.createElement(t,Object.assign({},e))}},a.rdrTable=function(){var t=this.props.compTbl;if(t){var e=this.getTblProps();return l.default.createElement(t,Object.assign({},e))}},a.rdrPag=function(){if(this.res.pagecount<=1)return null;var t=this.props.compPag;if(t){var e=this.getPagProps();return l.default.createElement(t,Object.assign({},e))}},a.rdrChilds=function(){return[this.rdrFind(),this.rdrTable(),this.rdrPag()]},a.render=function(){var t=this.state.loading;return l.default.createElement("div",{className:"base"+(this.props.className?" "+this.props.className:"")+(t?" loading":"")},this.rdrChilds())},a.componentDidMount=function(){this.onReload()},e}(l.default.Component),E=function(t){function e(e){var r;return(r=t.call(this,e)||this).textInsert="",r.textReload="",r.textReloadIcon="fa-search",r.state=r.gInitState(e),r.onCh=r.onCh.bind(u(r)),r.onChUpdate=r.onChUpdate.bind(u(r)),r.onChLimit=r.onChLimit.bind(u(r)),r.callPropsSearch=r.callPropsSearch.bind(u(r)),r.hKeyPress=r.hKeyPress.bind(u(r)),r.rdrApFind=r.rdrApFind.bind(u(r)),r.onClickIns=r.onClickIns.bind(u(r)),r.onClickLoad=r.onClickLoad.bind(u(r)),r.onClickSearch=r.onClickSearch.bind(u(r)),r.btnInsertIcon=function(){return l.default.createElement("i",{className:"fa fa-plus-circle"})},r.btnInsertClass="btn btn-outline-primary",r}d(e,t);var r=e.prototype;return r.gInitState=function(t){var e={search:{search:""}};return null!=t&&t.search&&(e.search=Object.assign({},t.search)),e},r.callPropsSearch=function(){"function"==typeof this.props.onSearch&&this.props.onSearch(this.state.search)},r.onCh=function(t){if(t&&t.target&&t.target.name){var e=this.state.search||{},r=t.currentTarget.value;e[t.currentTarget.name]=Array.isArray(r)?r.slice(0):r,this.setState({search:Object.assign({},e)})}},r.onChUpdate=function(t){if(t&&t.target&&t.currentTarget.name){var e=this.state.search||{},r=t.currentTarget.value;e[t.currentTarget.name]=Array.isArray(r)?r.slice(0):r,this.setState({search:Object.assign({},e)},this.callPropsSearch)}},r.onChLimit=function(t){var e=""===t.target.value?20:parseInt(t.target.value);isNaN(e)&&(e=0);var r=this.props||{},n=void 0!==r.limit&&null!==r.limit?parseInt(r.limit):0;isNaN(n)&&(n=0),e!==n&&"function"==typeof this.props.onSetLimit&&this.props.onSetLimit(e)},r.hKeyPress=function(t){t&&"Enter"===t.key&&this.callPropsSearch()},r.onClickIns=function(t){if(t&&t.preventDefault(),!this.props.loading&&this.props.useInsert&&"function"==typeof this.props.onInsert){var e=t?t.target:void 0;void 0!==e&&"function"==typeof e.blur&&e.blur(),this.props.onInsert()}},r.onClickLoad=function(t){t&&t.preventDefault(),this.props.loading||(n.isEqual(this.state.search,this.props.search)?"function"==typeof this.props.onReload&&this.props.onReload():this.callPropsSearch())},r.onClickSearch=function(t){t&&t.preventDefault(),this.props.loading||this.callPropsSearch()},r.rdrApFind=function(){var t=this.props,e=t.loading,r=[l.default.createElement("button",{type:"button",className:"btn",onClick:this.onClickLoad},l.default.createElement("i",{className:"fa "+(this.props.loading?"fa-spin fa-spinner":this.textReloadIcon)}),this.textReload?" "+this.textReload:"")];return t.useInsert&&r.push(l.default.createElement("button",{type:"button",className:e?"btn-outline-secondary":this.btnInsertClass,onClick:this.onClickIns},!e&&l.default.createElement("span",null,this.btnInsertIcon?"function"==typeof this.btnInsertIcon?this.btnInsertIcon():this.btnInsertIcon:null,this.textInsert?" "+this.textInsert:""),e&&l.default.createElement("i",{className:"fa fa-spin fa-spinner"}))),r},r.render=function(){var t=this.state.search||{};return l.default.createElement("div",{className:"base-find noprint"},l.default.createElement("div",{className:"input-group"},l.default.createElement("div",{className:"input-group-element"},l.default.createElement("input",{type:"text",name:"search",id:"search",autoComplete:"off",placeholder:"Keyword",value:t.search,onChange:this.onCh,onKeyPress:this.hKeyPress,spellCheck:"false"})),l.default.createElement("div",{className:"input-group-append"},this.rdrApFind())))},e}(l.default.Component),O=function(t,e,r){return l.default.createElement("a",{title:"kehalaman "+t,onClick:function(e){e.preventDefault(),r&&r(t)}},l.default.createElement("span",{className:e}))},I=function(t,e,r){var n=e!==t?r:null,s=e===t?"active aktif":"";return l.default.createElement("a",{className:"step "+s,onClick:function(e){e.preventDefault(),n&&n(t)}},l.default.createElement("span",null,t))};function A(t){var e=t.page,r=t.pagecount,s=t.range;e=n.toInt(e),r=n.toInt(r);var a=(s=n.toInt(s))%2==0?s/2-1:(s-1)/2,i=e-a,o=e+(s%2==0?a+1:a);return(o=o<(i=i<1?1:i)+s-1?i+s-1:o)>r&&(i=i>1?r-s+1:1,o=r),{page:e,pagecount:r,range:s,pagemin:i=i<1?1:i,pagemax:o}}function R(t){var e=Object.assign({},t);if(e.table_head=[],e.table_row=[],e.fields&&Array.isArray(e.fields)&&e.fields.length>0)for(var r=0;r<e.fields.length;r++){var s=e.fields[r]||{},a="";a=s.alias?s.alias:n.toUcWords(s.f),(a=n.toStr(a)).length>0&&(e.table_head.push(a),e.table_row.push(Object.assign(Object.assign({},s),{f:s.f,cb:s.cb})))}return e}var j=function(t){function e(e){var r;return(r=t.call(this,e)||this).table=R(e.table||{}),r}return d(e,t),e.prototype.render=function(){var t=this,e=this.table.table_head||[],r=this.table.table_row||[],n=this.props.records||[],s=0,a=this.props.useUpdate||this.props.useDelete;return l.default.createElement("div",{className:"base-data-table"},l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{className:"deep"},"No"),e.map((function(t,e){return l.default.createElement("th",{key:e},t)})),a&&l.default.createElement("th",{className:"deep noprint"},l.default.createElement("i",{className:"fa fa-gear"})))),l.default.createElement("tbody",null,n.map((function(e,n){return s++,l.default.createElement("tr",{key:n},l.default.createElement("td",{className:"deep",align:"center"},s),r.map((function(t,r){var n=e[t.f];if("function"==typeof t.cb)try{n=t.cb(e[t.f],e)}catch(t){}var s={};return t.align&&(s.align=t.align),t.style&&(s.style=t.style),t.className&&(s.className=t.className),l.default.createElement("td",Object.assign({key:r},s),n)})),a&&l.default.createElement("td",{className:"deep noprint"},l.default.createElement("div",{className:"base-actions"},l.default.createElement("a",{onClick:function(r){r.preventDefault(),t.props.onUpdate&&t.props.onUpdate(e)},className:"btn btn-outline-secondary btn-sm"},l.default.createElement("i",{className:"fa fa-pencil"})),l.default.createElement("a",{onClick:function(r){r.preventDefault(),t.props.onDelete&&t.props.onDelete(e)},className:"btn btn-outline-danger btn-sm"},l.default.createElement("i",{className:"fa fa-trash-o"})))))})))))},e}(l.default.Component);"function"==typeof SuppressedError&&SuppressedError;var x=function(t){function e(e){var r;return(r=t.call(this,e)||this).classForm="modalForm",r.btnSaveText="Simpan",r.btnCancelText="Batal",r.useEfieldId=!0,r.titleIns=v(),r.titleUpd=y(),r.styleForm={},r.hUploadProgress=r.hUploadProgress.bind(u(r)),r.onSubmit=r.onSubmit.bind(u(r)),r.onCh=r.onCh.bind(u(r)),r.onClSubmit=r.onClSubmit.bind(u(r)),r.onSuccess=r.onSuccess.bind(u(r)),r.getCkBoxVal=r.getCkBoxVal.bind(u(r)),r.prevData=Object.assign({},e.data),r.data=Object.assign({},e.data),r.nodeForm=null,r.state=r.gInitState(),r}d(e,t);var r=e.prototype;return r.gInitState=function(){return{loading:!1,progress:null}},r.getIncludeFields=function(){return[]},r.getCkBoxVal=function(t,e){return e&&(Array.isArray(t)&&t.length>0||n.toStr(t).toString().trim().length>0)?t:null},r.getEditing=function(){return!n.isObjectEmpty(this.prevData)},r.getSetup=function(){var t=this,e=this.getEditing(),r={url:e?this.props.url_update||"":this.props.url_insert||"",method:"post",formElement:this.nodeForm,uploadProgress:this.hUploadProgress};e&&(r.params={},this.useEfieldId&&(r.params[this.props.fieldid]=this.prevData[this.props.fieldid]),r.params[this.props.fieldid+"_lama"]=this.prevData[this.props.fieldid]);var n=this.getIncludeFields()||[];if(n.length>0){r.params||(r.params={});for(var s=0;s<n.length;s++){var a=this.data[n[s]];null==a&&(a=this.prevData[n[s]]),null!=a&&(r.params[n[s]]=a)}}if(this.nodeForm){var i=this.nodeForm;["input[type=checkbox]"].forEach((function(e){var n=i.querySelectorAll(e),s=function(e,n,s){var a=function(t){return r.params?r.params[t]:null}(e);a=null==a?function(e){return t.data[e]}(e):a,null!=a&&(r.params||(r.params={}),r.params[e]=a)};n.forEach((function(t){var e=t;e.name&&"checkbox"===e.type&&s(e.name,e.value)}))}))}var o=S();return o&&(r.headers=Object.assign({},o)),r},r.hUploadProgress=function(t){this.setState({progress:t?Object.assign({},t):null})},r.onSuccess=function(t){"function"==typeof this.props.onUpdate&&this.props.onUpdate(t),"function"==typeof this.props.onClose&&this.props.onClose()},r.onSubmit=function(t){var e=this;t&&t.preventDefault(),this.setState({loading:!0},(function(){var t=e.getSetup();s.ajax(t).then((function(t){e.onSuccess(t)})).catch((function(t){e.setState({loading:!1,progress:null}),w(t)}))}))},r.onCh=function(t){var e=t.target.type;if(this.data[t.target.name]=t.target.value,"checkbox"===e){var r=t.target.checked,n=t.target.value;n=this.getCkBoxVal(n,r),this.data[t.target.name]=n,null==n&&delete this.data[t.target.name]}this.forceUpdate()},r.onClSubmit=function(t){t&&t.preventDefault(),this.onSubmit()},r.rdrTitle=function(){var t=this.state.loading;return l.default.createElement("div",{className:"windowTitle"},l.default.createElement("div",{className:"auto"},this.getEditing()?this.titleUpd+" ":this.titleIns+" ",this.props.formTitle?this.props.formTitle:"Data"),l.default.createElement("div",null,!t&&l.default.createElement("a",{className:"close",onClick:this.props.onClose},"✖")))},r.rdrActions=function(){var t=this.state.loading;return l.default.createElement("div",{className:"windowAction"},t&&l.default.createElement("button",{type:"button",className:"btn"},"Mengirim... ",l.default.createElement("i",{className:"fa fa-spin fa-spinner"})),!t&&l.default.createElement("button",{type:"submit",className:"btn btn-outline-primary",onClick:this.onClSubmit},l.default.createElement("i",{className:"fa fa-save"})," ",this.btnSaveText," "),!t&&l.default.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:this.props.onClose},l.default.createElement("i",{className:"fa fa-remove"})," ",this.btnCancelText))},r.rdrContent=function(){return this.data,l.default.createElement("div",{className:"windowContent"},"Use content this,....")},r.render=function(){var t=this,e=this.state,r=e.loading,n=e.progress;return l.default.createElement("form",{ref:function(e){return t.nodeForm=e},className:""+(this.classForm?this.classForm:""),onSubmit:this.onSubmit,style:this.styleForm},l.default.createElement("div",{className:"wrap",style:{position:"relative"}},this.rdrTitle(),this.rdrContent(),this.rdrActions(),r&&l.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"flex-end",justifyContent:"center",left:"0",top:"0",zIndex:2}},n&&l.default.createElement("div",{className:"relative w-2/3 gap-1",style:{position:"relative",marginBottom:"12.5%",width:"75%",display:"grid",gap:"0.5rem"}},l.default.createElement("div",{className:"flex justify-between text-xs",style:{display:"flex",justifyContent:"space-between",fontSize:"0.75rem"}},l.default.createElement("div",null,n.percentage.toFixed(2),"%"),l.default.createElement("div",null,"100%")),l.default.createElement("div",{className:"relative h-2 border rounded overflow-hidden bg-white border-blue-500",style:{position:"relative",border:"solid 1px #3B82F6",backgroundColor:"white",overflow:"hidden",borderRadius:"0.25rem"}},l.default.createElement("div",{className:"bg-blue-500",style:{position:"absolute",left:0,top:0,height:"100%",transition:"all 274ms ease-in-out",backgroundColor:"#3B82F6",width:n.percentage+"%"}}))))))},e}(l.default.Component);var D=function(t){function e(e){var r;return(r=t.call(this,e)||this).gInitState=r.gInitState.bind(u(r)),r.state=r.gInitState(e),r.onTgOpen=r.onTgOpen.bind(u(r)),r.onReloadSelf=r.onReloadSelf.bind(u(r)),r.rdrChild=r.rdrChild.bind(u(r)),r}d(e,t);var r=e.prototype;return r.gInitState=function(t){return t=t||this.props,{open:!1}},r.onTgOpen=function(t){t&&t.preventDefault(),this.setState({open:!this.state.open})},r.onReloadSelf=function(){},r.rdrChild=function(){},e}(l.default.Component),N=function(t){function e(e){var r;return(r=t.call(this,e)||this).res=null,r.doLoad=r.doLoad.bind(u(r)),r.onReload=r.onReload.bind(u(r)),r}d(e,t);var r=e.prototype;return r.getStp=function(){var t,e;return{url:null!==(t=this.props.url)&&void 0!==t?t:"",params:this.props.params,method:null!==(e=this.props.method)&&void 0!==e?e:"GET",headers:S()}},r.doLoad=function(){var t=this,e=this.getStp();s.ajax(e).then((function(e){t.res=Object.assign({},e),t.setState({loading:!1,error:null})})).catch((function(e){t.res=null,t.setState({loading:!1,error:e})}))},r.onReload=function(t){t&&t.preventDefault(),this.setState({loading:!1,error:null},this.doLoad)},r.componentDidMount=function(){this.props.url&&this.props.url.length>0&&this.onReload()},e}(l.default.Component);var U=function(t){function e(e){var r;return(r=t.call(this,e)||this).gState=r.gState.bind(u(r)),r.applyAftRes=r.applyAftRes.bind(u(r)),r.handRes=r.handRes.bind(u(r)),r.onLoad=r.onLoad.bind(u(r)),r.doLoad=r.doLoad.bind(u(r)),r.callOnRes=r.callOnRes.bind(u(r)),r.options=[],r.chosenOptions=[],r.state=r.gState(e),r}d(e,t);var r=e.prototype;return r.gState=function(t){return{loading:!1}},r.handRes=function(t){},r.applyAftRes=function(){var t=this;if(this.chosenOptions=[],this.options.length>0&&this.props.sortField&&this.options.sort((function(e,r){var n=e[t.props.sortField],s=r[t.props.sortField];return n>s?1:n<s?-1:0})),this.options.length>0&&"function"==typeof this.props.onFieldName){var e=n.toStr(this.props.fieldname).toString().trim(),r=n.toStr(this.props.fieldid).toString().trim();r=r.length<1?e:r;for(var s=[],a=0;a<this.options.length;a++){var i=this.options[a];if("object"==typeof i){for(var o in i)i[o+"_origin_"]=i[o];var l=n.toStr(i[r]).toString().trim();if(!(s.indexOf(l)>=0)){var d=n.toStr(i[e]);d=d.length<1?l:d;try{var c=this.props.onFieldName(i);"string"==typeof c&&n.toStr(c).length>0&&(d=n.toStr(c).toString().trim())}catch(t){}s.push(l);var u=Object.assign({},i);u[this.props.name]=l,u[r]=l,u[e]=d,this.chosenOptions.push(u)}}}}else this.chosenOptions=this.options},r.callOnRes=function(){var t=null;try{"function"==typeof this.props.onRes&&(t=this.props.onRes(this.options),Array.isArray(t)&&(this.options=t.slice(0)))}catch(t){}},r.doLoad=function(){var t=this,e=n.toStr(this.props.url).toString().trim();if(!(e.length<1)){var r={url:e,method:this.props.method?this.props.method:"GET",params:Object.assign({},this.props.params)},a=S();Headers&&(r.headers=Object.assign({},a)),this.props.useCache?s.ajaxCache(r,this.props.cacheExpire).then((function(e){t.options=Array.isArray(e)&&e.length>0?e.slice(0):"object"==typeof e&&e.records&&Array.isArray(e.records)?e.records.slice(0):[],t.handRes(e),t.callOnRes(),t.applyAftRes(),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})})):s.ajax(r).then((function(e){t.options=Array.isArray(e)&&e.length>0?e.slice(0):"object"==typeof e&&e.records&&Array.isArray(e.records)?e.records.slice(0):[],t.handRes(e),t.callOnRes(),t.applyAftRes(),t.setState({loading:!1})})).catch((function(){t.setState({loading:!1})}))}},r.onLoad=function(){n.toStr(this.props.url).toString().trim().length<1||(this.state.loading?this.doLoad():this.setState({loading:!0},this.doLoad))},r.componentDidMount=function(){this.onLoad()},r.componentDidUpdate=function(t){var e=!n.isEqual(this.props.params,t.params);e?this.onLoad():Array.isArray(t.value)||Array.isArray(this.props.value)||(e=n.toStr(t.value).toString().trim()!==n.toStr(this.props.value).toString().trim())&&this.forceUpdate()},r.render=function(){var t={name:this.props.name,loading:this.state.loading,onChange:this.props.onChange,value:this.props.value,fieldid:this.props.fieldid,fieldname:this.props.fieldname,placeholder:this.props.placeholder};return!0===this.props.multiple&&(t.multiple=!0),l.default.createElement(a.Select,Object.assign({},t,{options:this.chosenOptions}))},e}(l.default.Component);t.Base=C,t.BaseFind=E,t.BaseLoader=N,t.BaseModal=x,t.BasePag=function(t){var e=A({page:n.toInt(t.page),pagecount:n.toInt(t.pagecount),range:5}),r=[];e.pagecount>1&&e.page>1&&r.push(O(1,"first",t.onSetPage)),e.page>1&&1!==e.page&&r.push(O(e.page-1,"prev",t.onSetPage));for(var s=e.pagemin;s<e.pagemax;s++)r.push(I(s,e.page,t.onSetPage));e.page<e.pagecount&&r.push(O(e.page+1,"next",t.onSetPage)),e.pagecount>1&&e.page<e.pagecount&&r.push(O(e.pagecount,"last",t.onSetPage));var a=void 0===t.dsLeft||!0!==t.dsLeft&&!1!==t.dsLeft||t.dsLeft,i=void 0===t.dsRight||!0!==t.dsRight&&!1!==t.dsRight||t.dsRight,o=a||i?function(t){var e=t.page,r=t.limit,s=t.rowcount,a=t.totalrow;e=n.toInt(e),s=n.toInt(s),a=n.toInt(a);var i=((e=e<1?1:e)-1)*(r=n.toInt(r))+1,o=i+r-1;return o=o>a?a:o,l.default.createElement("div",{className:"info"},l.default.createElement("b",null,i),"-",l.default.createElement("b",null,o),a>0&&l.default.createElement("span",null," / ",l.default.createElement("b",null,n.toDashVal(a))))}({page:e.page,limit:n.toInt(t.limit),rowcount:n.toInt(t.rowcount),totalrow:n.toInt(t.totalrow)}):null,d={justifyContent:"center"};return(i&&!i||!a&&i)&&(d.justifyContent=i?"flex-start;":"flex-end"),l.default.createElement("div",{className:"pagination"},t.dsLeft&&o,l.default.createElement("div",{className:"paging",style:d},r),t.dsRight&&o)},t.BaseTable=j,t.Item=D,t.SelectList=U,t.baseResAttrGet=m,t.baseResAttrSet=function(t){for(var e=["records","page","pagecount","limit","rowcount","totalrow"],r=0;r<e.length;r++)e[r]in t&&(g[e[r]]=t[e[r]])},t.createModalPromise=function(t){var e=t.component,n=t.url_insert,s=t.url_update,a=t.formTitle,i=t.data,o=t.fieldid,l=void 0===o?"id":o,d=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]])}return r}(t,["component","url_insert","url_update","formTitle","data","fieldid"]);return new Promise((function(t){r.modal({component:e||x,props:Object.assign(Object.assign({data:i,formTitle:a,url_insert:n,url_update:s,fieldid:l},d),{onUpdate:function(e){t(e)}})})}))},t.generateFromSetupTable=R,t.generatePageInfo=A,t.getConfigHeader=S,t.getDefaultBaseModalTitleInsert=v,t.getDefaultBaseModalTitleUpdate=y,t.getDefaultDeleteRequestType=b,t.handleAlertErrorBase=w,t.handleResponseSelf=function(t){if(void 0!==this.res&&null!==this.res&&"object"==typeof this.res){var e=t;e&&e.records&&Array.isArray(e.records)?(this.res=Object.assign({},e),this.res.records=e.records.slice(0),this.res.page=void 0!==this.res.page&&null!==this.res.page?this.res.page:1,this.res.pagecount=void 0!==this.res.pagecount&&null!==this.res.pagecount?this.res.pagecount:1,this.res.totalrow=void 0===this.res.totalrow||null===this.res.totalrow?this.res.records.length:this.res.totalrow,this.res.rowcount=void 0===this.res.rowcount||null===this.res.rowcount?this.res.records.length:this.res.rowcount,this.res.limit=void 0!==e.limit&&null!==e.limit?e.limit:this.req.limit,this.res.page=this.res.page<1?1:this.res.page,this.res.pagecount=this.res.pagecount<1?1:this.res.pagecount,this.res.totalrow=this.res.totalrow<0?0:this.res.totalrow,this.res.rowcount=this.res.rowcount<0?0:this.res.rowcount,this.res.rowcount=this.res.rowcount>this.res.totalrow?this.res.totalrow:this.res.rowcount,this.records=this.res.records.slice(0),this.res.records=[]):Array.isArray(e)?(this.records=e.slice(0),this.res.page=1,this.res.pagecount=1,this.res.totalrow=this.records.length,this.res.rowcount=this.res.totalrow):(this.records=[],this.res.page=1,this.res.pagecount=1,this.res.totalrow=0,this.res.rowcount=0)}},t.setConfigHeader=function(t){o=t||null},t.setDefaultBaseModalTitleInsert=function(t){p=t},t.setDefaultBaseModalTitleUpdate=function(t){f=t},t.setDefaultDeleteRequestType=function(t){h=t},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
